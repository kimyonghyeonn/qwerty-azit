CI/CD λ€?

CI (Continuous Integration)
μ§€μ†μ  ν†µν•©μ΄λΌλ” μλ―Έ, μ‰½κ² μ–κΈ°ν•΄ μ½”λ“κ°€ λ¬Έμ  μ—†λ”μ§€ μλ™μΌλ΅ ν™•μΈν•λ” λ‹¨κ³„λ¥Ό μλ―Έ = λΉλ“

CD (Continuous Deployment / Delivery)
μ§€μ†μ  λ°°ν¬λΌλ” μλ―Έ, CIλ¥Ό ν†µν•΄ ν™•μΈλ μ½”λ“λ¥Ό μ„λ²„μ— μλ™μΌλ΅ μ¬λ¦¬λ” λ‹¨κ³„λ¥Ό μλ―Έν•¨ = λ°°ν¬

ν„μ¬ ν•΄λ‹Ή ν”„λ΅μ νΈμ CICDλ” GitHub Actions λ¥Ό μ‚¬μ©ν•λ‹¤.

ν„μ¬ main λΈλμΉμ—μ„ push μ΄λ²¤νΈκ°€ λ°μƒλλ©΄ .github/workflows ν΄λ” ν•μ„μ yml νμΌμ„ νƒμƒ‰ (.github/workflows ν΄λ”λ¥Ό λ¨Όμ € λ§λ“¤μ–΄μ¤μ•Όν•¨)
yml νμΌμ— μ ν€μλ” Job μ„ μμ°¨ μ‹¤ν–‰ν•λ‹¤. Jobμ—λ” μ—¬λ¬λ‹¨κ³„μ Stepμ΄ μ΅΄μ¬ν•λ‹¤. Stepμ€ λ…λ Ή ν•λ‚ ν•λ‚λ¥Ό μλ―Έν•λ‹¤.

Stepμ νλ¦„μ€ λ‹¤μκ³Ό κ°™λ‹¤

1. μ½”λ“ κ°€μ Έμ¤κΈ° (checkout)
2. κ°λ°ν™κ²½ μ„Έν… (Java/Node)
3. λΉλ“ μ‹¤ν–‰
4. λ°°ν¬ μ‹¤ν–‰

ν„μ¬ ν•΄λ‹Ή ν”„λ΅μ νΈμ WEB/WAS μ„λ²„λ” EC2μ— μ¬λΌκ°€μ Έ μλ‹¤.
λ”°λΌμ„ GitHub Actions μ—μ„ CIλ¥Ό μ§„ν–‰ν•μ—¬ EC2 μ— λ°°ν¬(CD)ν•κΈ° μ„ν•΄μ„λ” EC2 μ ‘μ†μ •λ³΄κ°€ ν•„μ”ν•λ‹¤.

ν•„μ”ν• EC2 μ ‘μ†μ •λ³΄
EC2_HOST : EC2 νΌλΈ”λ¦­ IP λλ” λ„λ©”μΈ (μ—¬κΈ°μ„λ” EC2 μ™€ λ¶™μ–΄μλ” νƒ„λ ¥μ  IP λ΅ μ§€μ •ν–λ‹¤.)
EC2_USER : EC2 μ— μ ‘μ†ν• μ μλ” μ ‘μ† κ³„μ •μ„ μλ―Έ, ν„μ¬ EC2 μ OSκ°€ Amazon Linux μ΄κΈ° λ•λ¬Έμ— ec2-user λ΅ μ§€μ •
EC2_SSH_KEY : pem κ°μΈν‚¤ (λ‚΄μ© μ „μ²΄)

- .pem ν‚¤ νμΌ λ‚΄μ© μ „μ²΄λ¥Ό μλ―Έν•λ©°
  -----BEGIN RSA PRIVATE KEY-----
  MIIEpAIBAAKCAQEA...
  ...
  -----END RSA PRIVATE KEY-----
  ν•νƒλ΅ κµ¬μ„±λμ–΄ μμ

μ£Όμμ‚¬ν•­
EC2_HOST λ” κ³ μ •IP λ¥Ό μ‚¬μ©ν•μ—¬ μ μ¶” κ°€λ¥ν•μ§€λ§ EC2_USER, EC2_SSH_KEY λ“±μ€ λ©”λ¨μ¥μ— λ”°λ΅ μ μ–΄λ‘λ”κ² μΆ‹λ‹¤.
Github Actions μ secrets λ΅ μ €μ¥λλ©΄ μ΅°νν• μ μ—†κΈ° λ•λ¬Έ, μ™ λ§ν•λ©΄ secrets μ— λ“¤μ–΄κ°€λ” μ •λ³΄λ“¤μ€ λ”°λ΅ μ €μ¥ν•΄λ‘μ.

[μ½”λ“ μμ •]
β”‚
β–Ό
[GitHubμ— push]
β”‚
β–Ό
[GitHub Actions μ‹¤ν–‰ μ‹μ‘]
β”‚
β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ CI λ‹¨κ³„ (λΉλ“) β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚
β”β”€ β λΉλ“ μ‹¤ν¨
β”‚ β”‚
β”‚ β–Ό
β”‚ [CI μ¤‘λ‹¨]
β”‚ β”‚
β”‚ - λ°°ν¬ μ‹¤ν–‰ β
β”‚ - EC2 μ ‘μ† β
β”‚ - κΈ°μ΅΄ μ„λΉ„μ¤ μ μ§€
β”‚ β”‚
β”‚ π‘‰ GitHub Actions β ν‘μ‹
β”‚ π‘‰ κ°λ°μ λ΅κ·Έ ν™•μΈ ν›„ μμ •
β”‚
β””β”€ β… λΉλ“ μ„±κ³µ
β”‚
β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ CD λ‹¨κ³„ (λ°°ν¬) β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚
β–Ό
[EC2λ΅ νμΌ μ „μ†΅]
β”‚
β”β”€ β μ „μ†΅ μ‹¤ν¨
β”‚ β”‚
β”‚ β–Ό
β”‚ [λ°°ν¬ μ¤‘λ‹¨]
β”‚ β”‚
β”‚ - μ„λ²„ μ¬μ‹μ‘ β
β”‚ - κΈ°μ΅΄ μ„λΉ„μ¤ μ μ§€
β”‚ β”‚
β”‚ π‘‰ λ„¤νΈμ›ν¬/κ¶ν• λ¬Έμ 
β”‚
β””β”€ β… μ „μ†΅ μ„±κ³µ
β”‚
β–Ό
[μ„λ²„ μ¬μ‹μ‘]
β”‚
β”β”€ β μ¬μ‹μ‘ μ‹¤ν¨
β”‚ β”‚
β”‚ β–Ό
β”‚ [μ„λΉ„μ¤ μ¥μ•  κ°€λ¥ β ]
β”‚ β”‚
β”‚ - μ„¤μ • μ¤λ¥
β”‚ - ν¬νΈ μ¶©λ
β”‚ β”‚
β”‚ π‘‰ λ΅κ·Έ ν™•μΈ / λ΅¤λ°± ν•„μ”
β”‚
β””β”€ β… μ¬μ‹μ‘ μ„±κ³µ
β”‚
β–Ό
[μ‚¬μ©μμ—κ² λ°μ π‰]
